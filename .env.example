# ============================================================================
# Apuntador Backend - Environment Variables
# ============================================================================
# 
# Copy this file to .env and configure your values:
#   cp .env.example .env
#
# Convention: Variables in UPPERCASE (although pydantic accepts lowercase too)
# ============================================================================

# ============================================================================
# PROJECT SETTINGS
# ============================================================================
PROJECT_NAME=Apuntador OAuth Backend
PROJECT_DESCRIPTION=Unified backend for OAuth 2.0 with multiple cloud providers
PROJECT_VERSION=1.0.0

# ============================================================================
# SERVER SETTINGS
# ============================================================================
HOST=0.0.0.0
PORT=8000
DEBUG=false

# Enable API documentation (Swagger/ReDoc) - Set to false in production for security
ENABLE_DOCS=false

# IMPORTANT: Generate a random secret key (use: openssl rand -hex 32)
SECRET_KEY=change-this-to-a-random-secret-key-in-production

# ============================================================================
# LOGGING SETTINGS
# ============================================================================
LOG_LEVEL=INFO
# Log format: 'json' for structured JSON logs (production/CloudWatch), 'human' for readable text (development)
LOG_FORMAT=json
LOGGER_NAME=apuntador
LOGGER_ENQUEUE=false

# ============================================================================
# CORS SETTINGS
# ============================================================================
# Allowed origins separated by comma (no spaces)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,capacitor://localhost,tauri://localhost

# Allowed HTTP methods (security restriction)
CORS_ALLOWED_METHODS=GET,POST,OPTIONS

# Allowed headers (security restriction)
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Client-Cert,X-Device-ID

# ============================================================================
# DATABASE SETTINGS
# ============================================================================
INITIALIZE_DATABASE=true
HEALTHCHECK_DATABASE=false

# ============================================================================
# INFRASTRUCTURE SETTINGS (mTLS Certificate Management)
# ============================================================================
# Provider: "local" (development) or "aws" (production)
INFRASTRUCTURE_PROVIDER=local

# Local infrastructure (when INFRASTRUCTURE_PROVIDER=local)
# This directory is used to store:
# - CA private key and certificate
# - Device certificates
# - Local secrets
INFRASTRUCTURE_BASE_DIR=./.credentials

# AWS infrastructure (when INFRASTRUCTURE_PROVIDER=aws)
AWS_REGION=eu-west-1
AWS_DYNAMODB_TABLE=apuntador-certificates
AWS_S3_BUCKET=apuntador-cert-storage
AWS_SECRETS_PREFIX=apuntador
AUTO_CREATE_RESOURCES=false  # true for development, false for production

# ============================================================================
# AUTH SETTINGS (AWS Cognito - optional)
# ============================================================================
USER_POOL_ID=
TOKEN_VERIFICATION_DISABLED=false

# ============================================================================
# OBSERVABILITY SETTINGS (OpenTelemetry - optional)
# ============================================================================
OTEL_ENABLED=false
OTEL_SERVICE_NAME=apuntador-backend
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4317

# ============================================================================
# OAUTH PROVIDERS
# ============================================================================

# Enabled cloud providers (comma-separated list)
# Available options: googledrive, dropbox, onedrive
# Example: ENABLED_CLOUD_PROVIDERS=googledrive,dropbox
ENABLED_CLOUD_PROVIDERS=googledrive,dropbox

# --- Google Drive OAuth ---
# Get your credentials at: https://console.cloud.google.com/
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=https://apuntador.ngrok.app/oauth/callback/googledrive

# --- Dropbox OAuth ---
# Get your credentials at: https://www.dropbox.com/developers/apps
DROPBOX_CLIENT_ID=your-dropbox-app-key
DROPBOX_CLIENT_SECRET=your-dropbox-app-secret
DROPBOX_REDIRECT_URI=https://apuntador.ngrok.app/oauth/callback/dropbox

# --- OneDrive OAuth (optional) ---
# Get your credentials at: https://portal.azure.com/
# ONEDRIVE_CLIENT_ID=your-client-id
# ONEDRIVE_CLIENT_SECRET=your-client-secret
# ONEDRIVE_REDIRECT_URI=http://localhost:8000/oauth/callback/onedrive

# ============================================================================
# PRODUCTION OVERRIDES
# ============================================================================
# In production, override these values:
# - SECRET_KEY: Use a different random key
# - DEBUG: false
# - ALLOWED_ORIGINS: Only your production domains
# - REDIRECT_URIs: Production URLs
